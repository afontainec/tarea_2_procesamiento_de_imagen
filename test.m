clear all;
close all;
fig=1;


N=512;
redStars = [479 431 3; 462 415 3; 445 401 3; 428 388 3; 411 374 3; 393 360 3; 379 345 3; 360 331 2; 479 485 3; 461 472 3; 445 458 3; 427 443 3; 411 429 3; 394 415 3; 377 401 3; 359 386 1; 342 372 1; 325 358 1; 479 457 3; 462 443 3; 445 429 3; 428 415 3; 411 401 3; 394 387 3; 377 374 3; 359 359 3; 342 345 3; 325 331 3; 308 318 3; 290 304 3; 274 290 2; 256 275 2; 239 262 2; 547 541 5; 564 556 5; 580 569 5; 598 584 5; 615 598 5];
% redStars = [479 431 3; 462 415 3; 445 401 3; 428 388 3; 411 374 3; 393 360 3; 379 345 2; 360 331 2; 479 485 3; 461 472 3; 445 458 3; 427 443 3; 411 429 3; 394 415 3;]; % 377 401 3; 359 386 1; 342 372 1; 325 358 1; 479 457 3; 462 443 3; 445 429 3; 428 415 3; 411 401 3; 394 387 3; 377 374 3; 359 359 3; 342 345 3; 325 331 3; 308 318 3; 290 304 3; 274 290 2; 256 275 2; 239 262 2; 547 541 5; 564 556 5; 580 569 5; 598 584 5; 615 598 5];
greenStars = [496 499 3; 478 486 3; 462 474 3; 445 457 3; 429 444 3; 411 429 3; 395 416 3; 376 401 3; 360 388 3; 343 373 3; 325 360 3; 308 344 3; 290 331 3; 274 318 3; 255 304 3;]; 
blueStars = [496 499 4; 479 485 4; 461 471 4; 445 457 4; 428 444 4; 411 430 4; 394 416 4; 377 402 4; 360 388 4; 343 374 4; 326 359 4; 308 343 4; 291 331 4; 274 317 4; 258 305 4; 205 262 4; 188 247 4; 170 233 4; 153 219 4; 137 204 4; 497 473 4; 479 459 3; 463 444 3; 445 431 3; 429 417 3; 411 404 3; 395 388 3; 377 375 4; 361 361 4; 344 347 4; 326 332 4; 309 319 4; 291 305 4; 274 292 4; 258 278 4; 240 262 4; 223 248 4; 205 235 4; 189 222 3; 171 206 3; 154 195 3; 137 179 3; 121 166 3; 102 151 3; 85 137 3; 67 123 3; 497 446 3; 480 431 3; 463 416 3; 445 403 3; 429 388 3; 411 374 3; 395 360 3; 378 346 3; 360 333 3; 445 418 3; 428 404 3; 411 389 3; 394 374 3; 377 360 3; 360 347 3; 344 334 3; 325 318 3; 310 305 3; 309 288 3; 291 291 3; 293 275 3; 274 275 3; 273 261 3; 258 262 3; 257 248 3; 240 249 3; 240 233 3; 222 236 3; 222 219 3; 205 219 3; 207 205 3; 188 192 3; 172 178 3; 154 165 3; 136 150 3; 119 136 3; 105 125 3; 87 111 3; 69 100 3;];
Name = ["Red", "Green", "Blue"];
% Display Image
I = imread('venado.png');
% I = imrotate(I, 51);

figure(fig);
fig = fig + 1;
title('Original a color');
% imshow(I);

J = I;
for c = 3:3
    C  = I(:,:,c);
    figure(fig);
    fig = fig + 1;
    color = Name(c);
    imshow(C,[]);title(strcat("Original Color ", color) );
    
    
    f = double(C);
    F = fft2(f);
    F_ = fftshift(F);
    H = log(F_ + 1);
    G = H;
    
%     imtool(H,[]);
    figure(fig);
    fig = fig + 1;
    imshow(H, []);title('Transformada');
%     [x, y] = getpts;
%     
%     disp(x);
%     disp("-----------------------------------BREAK---------------");
%     disp(y);
    
    switch c
        case 1
            stars = redStars;
        case 2 
            stars = greenStars;
        case 3 
            stars = blueStars;
        otherwise
            stars = [];
    end
          
           
        
    for k = 1:length(stars)
        star = stars(k, :);
        y = star(1);
        x = star(2);
        r = star(3);
        G((x-r):(x+r), (y-r):(y+r)) = 0;
        
%         for p = 1:star(3)
%             G((x - p):(x - p), y:y) = 0;
%             G((x + p):(x + p), y:y) = 0;
%             G(x:x, (y - p):(y - p)) = 0;
%             G(x:x, (y + p):(y + p)) = 0;   
%         end
    end
    imtool(G,[]);title('Transformada ajustada')
    
    
    figure(fig);
    fig = fig + 1;
    
    g=ifft2(ifftshift(exp(G) - 1));
    imshow(g,[]);title('devuelta')
    
    
    J(:,:,c) = g;
end

figure(fig);
fig = fig + 1;
imshow(J,[]);title('Final a color')









